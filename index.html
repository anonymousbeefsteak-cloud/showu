<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>视频展示页面（已修复）</title>
    <!-- 修复：禁止浏览器自动请求 favicon.ico，避免 404 错误（方案二，无需额外图标文件） -->
    <link rel="icon" href="data:;base64,=">
    <style>
        /* 页面基础样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* 容器样式：让视频/静态背景居中适配 */
        .content-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f5f5f5;
        }

        /* 视频样式：自适应容器，保持比例 */
        .video-player {
            width: 80%;
            max-width: 1200px;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        /* 静态背景样式：与视频尺寸保持一致，实现无缝替代 */
        .static-background {
            width: 80%;
            max-width: 1200px;
            height: 560px; /* 与视频宽高比（16:9）匹配 */
            border-radius: 8px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            background: url("./images/bg-default.jpg") no-repeat center center;
            background-size: cover;
            display: none; /* 初始隐藏，视频加载失败后显示 */
        }

        /* 备用提示文字样式 */
        .error-tip {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- 核心内容容器：视频 + 静态背景 -->
    <div class="content-container">
        <!-- 修复：增强视频加载容错，失败后自动显示静态背景 -->
        <video 
            class="video-player"
            src="./video/demo.mp4"  <!-- 请替换为你的实际视频路径 -->
            autoplay  <!-- 自动播放（部分浏览器需配合静音） -->
            muted     <!-- 静音播放，提升自动播放兼容性 -->
            loop      <!-- 循环播放 -->
            onError="handleVideoError()"  <!-- 视频加载失败回调函数 -->
        >
            您的浏览器不支持 HTML5 视频播放，将为您展示静态背景。
        </video>

        <!-- 静态背景：视频加载失败时显示 -->
        <div class="static-background" id="static-bg"></div>
    </div>

    <!-- 修复：完善影片加载失败的回调逻辑 -->
    <script>
        // 视频加载失败处理函数
        function handleVideoError() {
            // 隐藏视频元素
            const video = document.querySelector('.video-player');
            video.style.display = 'none';

            // 显示静态背景
            const staticBg = document.getElementById('static-bg');
            staticBg.style.display = 'block';

            // 打印日志（便于调试，可删除）
            console.log("(index):2047 影片加載失敗，將使用靜態背景替代");

            // 可选：初始化你的 chextloader（加载器，对应原始日志）
            console.log(`Initialized chextloader at: ${Date.now()}`);
        }

        // 可选：页面加载完成后，主动检查视频是否可播放（额外容错）
        window.onload = function() {
            const video = document.querySelector('.video-player');
            // 监听视频加载异常事件（兼容部分浏览器的 onerror 不触发场景）
            video.addEventListener('abort', handleVideoError);
            video.addEventListener('error', handleVideoError);
        };
    </script>
</body>
</html>
